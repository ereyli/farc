<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>$FARC - The Farcaster Token</title>
  <link rel="icon" type="image/png" href="/farc.png" />
  <link rel="manifest" href="/farcaster.json" />

  <!-- Farcaster Mini App Meta -->
  <meta name="fc:frame" content="vNext" />
  <meta name="fc:frame:image" content="https://farc.vercel.app/farc.png" />
  <meta name="fc:frame:button:1" content="Launch App" />
  <meta name="fc:frame:button:1:action" content="launch_frame" />
  <meta name="fc:frame:button:1:target" content="https://farc.vercel.app" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%);
      color: white;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 400px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .logo {
      width: 120px;
      height: 120px;
      border-radius: 20px;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 36px;
      margin-bottom: 10px;
    }

    .card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .button {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .button-primary {
      background: #10b981;
      color: white;
    }

    .button-primary:hover {
      background: #059669;
    }

    .button-secondary {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      margin-top: 10px;
    }

    .button-secondary:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .loading {
      text-align: center;
      padding: 50px;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="loading" class="loading">
      <h2>Loading $FARC...</h2>
    </div>

    <div id="app" class="hidden">
      <div class="header">
        <img src="/farc.png" alt="FARC Logo" class="logo" />
        <h1>$FARC</h1>
        <p>The Official Farcaster Token</p>
        <p style="font-size: 14px; opacity: 0.8; margin-top: 5px;">üü£ Farcaster Exclusive</p>
      </div>

      <div class="card">
        <h2>üî• Presale LIVE</h2>
        <div class="info-row">
          <span>Price:</span>
          <strong>0.01 ETH = 1M FARC</strong>
        </div>
        <div class="info-row">
          <span>Max per wallet:</span>
          <strong>5M FARC</strong>
        </div>
        <div class="info-row">
          <span>Sold:</span>
          <strong id="tokens-sold">125M / 500M</strong>
        </div>
      </div>

      <div class="card">
        <h3>Buy $FARC</h3>
        <input
          type="number"
          id="amount-input"
          placeholder="Amount in ETH (e.g. 0.01)"
          step="0.001"
          min="0.001"
          style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: none;"
        />
        <div id="wallet-info" style="text-align: center; margin: 10px 0; font-size: 14px; opacity: 0.8;"></div>
        <button id="connect-button" class="button button-primary">Connect Farcaster Wallet</button>
        <button class="button button-secondary" onclick="share()">Share $FARC üì¢</button>
      </div>
    </div>
  </div>

  <script type="module">
    import { sdk } from 'https://esm.sh/@farcaster/frame-sdk';

    // MetaMask gibi dƒ±≈ü c√ºzdanlarƒ± devre dƒ±≈üƒ± bƒ±rak
    window.ethereum = null;

    window.handleConnection = async function(address) {
      const walletInfo = document.getElementById('wallet-info');
      const button = document.getElementById('connect-button');
      button.textContent = 'Buy FARC üöÄ';
      walletInfo.innerHTML = `<span style="color: #8B5CF6;">üü£ Farcaster Wallet</span><br>${address.slice(0, 6)}...${address.slice(-4)}`;

      button.onclick = async () => {
        const amount = document.getElementById('amount-input').value;
        if (!amount || parseFloat(amount) <= 0) {
          alert('Please enter a valid amount');
          return;
        }

        const ethAmount = parseFloat(amount);
        const tokensToReceive = ethAmount * 100;

        alert(
          `‚úÖ Purchase Ready!\n\nYou will receive ${tokensToReceive}M FARC.\n\nSmart contract coming soon.`
        );
      };
    };

    window.share = function() {
      const text = 'Check out $FARC - The Official Farcaster Token! üöÄ\n\nPresale: 0.01 ETH = 1M FARC\nMax 5M per wallet\n\nhttps://farc.vercel.app';

      if (navigator.share) {
        navigator.share({ title: '$FARC Token', text });
      } else {
        navigator.clipboard.writeText(text);
        alert('Share text copied to clipboard!');
      }
    };

    window.addEventListener('DOMContentLoaded', async () => {
      try {
        await sdk.actions.ready();
        const context = await sdk.context;

        if (!context?.user) {
          document.getElementById('loading').innerHTML = `<h2>Please open this app inside Farcaster üü£</h2>`;
          return;
        }

        window.farcasterUser = context.user;
        const address = context.user.verifiedAddresses?.ethAddresses?.[0];

        if (!address) {
          document.getElementById('wallet-info').innerHTML =
            `<span style="color: #f87171;">‚ö†Ô∏è No verified address</span><br><small>Add one in Warpcast Settings ‚Üí Verified Addresses</small>`;
        } else {
          window.handleConnection(address);
        }

        const header = document.querySelector('.header p');
        if (header && context.user.username) {
          header.innerHTML = `The Official Farcaster Token<br><small>üë§ @${context.user.username}</small>`;
        }

      } catch (err) {
        console.error('Error initializing Farcaster SDK:', err);
        document.getElementById('loading').innerHTML = `<h2>Failed to load Farcaster context</h2>`;
      } finally {
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');
      }
    });
  </script>
</body>
</html>
